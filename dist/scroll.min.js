/**
 * @touchjs/scroll v1.0.0
 * (c) 2014-2020 by elvin zhu
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Scroll={})}(this,(function(e){"use strict";function t(e,t,o,n){void 0===n&&(n=!1),e.addEventListener(t,o,n)}function o(e,t,o,n){void 0===n&&(n=!1),e.removeEventListener(t,o,n)}var n,i=["webkit","ms","moz","o"];function r(e,t){var o=t||document.body.style;if(!(e in o))for(var n=e.charAt(0).toUpperCase(),r=e.substr(1),u=0;u<i.length;u++){var a=i[u]+n+r;if(a in o)return a}return e}(n=e.Direction||(e.Direction={}))[n.X=0]="X",n[n.Y=1]="Y",n[n.Both=2]="Both",e.default=function(e,n){if(!e.__joyfulljs_scroll_bound){e.__joyfulljs_scroll_bound=!0;var i=window[r("requestAnimationFrame")]||function(e){return setTimeout(e,16)},u=e,a=e.querySelector(":first-child"),c={},s=r("transform"),d=!1,h=!1,f=0,p=0,l=0,m=0,g=0,v=0,w=function(e,n){if("[object Object]"!==Object.prototype.toString.call(n))throw new Error("[xtouch]: argument `options` is missing or illegal.");var i=n.onStart,r=n.onMove,u=n.onEnd,a=n.capture,c=null,s=function(e){"mousedown"===e.type&&(c=e.target,e.identifier=0,e.touches=e.changedTouches=[e],e.targetTouches=[e]),i(e)},d=function(e){"mousemove"===e.type&&(e.identifier=0,e.touches=e.changedTouches=[e],e.targetTouches=e.target===c?[e]:[]),r(e)},h=function(e){"mouseup"===e.type&&(e.identifier=0,e.touches=[],e.changedTouches=[e],e.targetTouches=e.target===c?[e]:[]),u(e)};return i&&(t(e,"touchstart",s,a),t(e,"mousedown",s,a)),r&&(t(window,"touchmove",d,a),t(window,"mousemove",d,a)),u&&(t(window,"touchend",h,a),t(window,"mouseup",h,a)),function(){o(e,"touchstart",s,a),o(window,"touchmove",d,a),o(window,"touchend",h,a),o(e,"mousedown",s,a),o(window,"mousemove",d,a),o(window,"mouseup",h,a)}}(u,{onStart:function(e){1===e.touches.length&&(f=Y(u),p=Y(a),m=function(e){var t=window.getComputedStyle(e)[s];if(t&&"none"!==t)return parseFloat(t.split(")")[0].split(",")[5]);return 0}(a),l=f-p,h=!1,d=!0,g=m,v=0,m>=0?v=m/.2-g:m<=l&&(v=(m-l)/.2+l-g));c[e.changedTouches[0].identifier]={touchStartY:e.changedTouches[0].pageY,speedStartY:m,speedStartTime:e.timeStamp}},onEnd:T,onMove:function(e){if(d){var t=S(e,e.changedTouches[0]);if(2===e.changedTouches.length)t=Math.max(t,S(e,e.changedTouches[1]));else if(e.changedTouches.length>2){for(var o=[t],n=1,i=e.changedTouches.length;n<i;n++)o.push(S(e,e.changedTouches[n]));t=Math.max.apply(Math,o)}(m=g+(v+=t))>0?m*=.2:m<l&&(m=l+.2*(m-l)),b(m),e.preventDefault()}},capture:{passive:!1}});return t(u,"touchcancel",T,!0),{destroy:function(){w(),o(u,"touchcancel",T,!0)}}}function S(e,t){var o=c[t.identifier];if(o){var n=t.pageY-o.touchStartY;return o.touchStartY=t.pageY,e.timeStamp-o.speedStartTime>200&&(o.speedStartY=m,o.speedStartTime=e.timeStamp),n}return 0}function T(e){var t=e.changedTouches[0].identifier;if(0===e.touches.length){d=!1;var o=c[t];if(o)!function(e,t){var o=Math.abs(e);if(!o||o<.01)return void(m>0?y(0):m<l&&y(l));h=!0;var n,r=o,u=e<0;i((function e(){h&&(r-=r/o*.3+.1,u?m-=r:m+=r,t(m),n=Math.min(3*r,120),m>n?y(0):m<l-n?y(l):r>0&&i(e))}))}((m-o.speedStartY)/((e.timeStamp-o.speedStartTime)/16),b)}c[t]=null}function y(e){h=!0,i((function t(){if(h){var o=m-e;Math.abs(o)<.01?m=e:(m-=.12*o,i(t)),b(m)}}))}function b(e){a.style[s]="translate3d(0,"+e+"px,0)"}function Y(e){var t=window.getComputedStyle(e);return parseFloat(t.height)+parseFloat(t.marginTop)+parseFloat(t.marginBottom)}},Object.defineProperty(e,"__esModule",{value:!0})}));
